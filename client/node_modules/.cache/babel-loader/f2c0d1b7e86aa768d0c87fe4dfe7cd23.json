{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nvar _excluded = [\"className\", \"children\", \"style\", \"width\", \"height\", \"defaultOpen\", \"open\", \"prefixCls\", \"placement\", \"level\", \"levelMove\", \"ease\", \"duration\", \"getContainer\", \"handler\", \"onChange\", \"afterVisibleChange\", \"showMask\", \"maskClosable\", \"maskStyle\", \"onClose\", \"onHandleClick\", \"keyboard\", \"getOpenCount\", \"scrollLocker\", \"contentWrapperStyle\"];\nimport * as React from 'react';\nimport classnames from 'classnames';\nimport getScrollBarSize from \"rc-util/es/getScrollBarSize\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport omit from \"rc-util/es/omit\";\nimport { addEventListener, dataToArray, getTouchParentScroll, isNumeric, removeEventListener, transformArguments, transitionEnd, transitionStr, windowIsUndefined } from './utils';\nvar currentDrawer = {};\n\nvar DrawerChild = /*#__PURE__*/function (_React$Component) {\n  _inherits(DrawerChild, _React$Component);\n\n  var _super = _createSuper(DrawerChild);\n\n  function DrawerChild(props) {\n    var _this;\n\n    _classCallCheck(this, DrawerChild);\n\n    _this = _super.call(this, props);\n    _this.levelDom = void 0;\n    _this.dom = void 0;\n    _this.contentWrapper = void 0;\n    _this.contentDom = void 0;\n    _this.maskDom = void 0;\n    _this.handlerDom = void 0;\n    _this.drawerId = void 0;\n    _this.timeout = void 0;\n    _this.passive = void 0;\n    _this.startPos = void 0;\n\n    _this.domFocus = function () {\n      if (_this.dom) {\n        _this.dom.focus();\n      }\n    };\n\n    _this.removeStartHandler = function (e) {\n      if (e.touches.length > 1) {\n        // need clear the startPos when another touch event happens\n        _this.startPos = null;\n        return;\n      }\n\n      _this.startPos = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY\n      };\n    };\n\n    _this.removeMoveHandler = function (e) {\n      // the startPos may be null or undefined\n      if (e.changedTouches.length > 1 || !_this.startPos) {\n        return;\n      }\n\n      var currentTarget = e.currentTarget;\n      var differX = e.changedTouches[0].clientX - _this.startPos.x;\n      var differY = e.changedTouches[0].clientY - _this.startPos.y;\n\n      if ((currentTarget === _this.maskDom || currentTarget === _this.handlerDom || currentTarget === _this.contentDom && getTouchParentScroll(currentTarget, e.target, differX, differY)) && e.cancelable) {\n        e.preventDefault();\n      }\n    };\n\n    _this.transitionEnd = function (e) {\n      var dom = e.target;\n      removeEventListener(dom, transitionEnd, _this.transitionEnd);\n      dom.style.transition = '';\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.keyCode === KeyCode.ESC) {\n        var onClose = _this.props.onClose;\n        e.stopPropagation();\n\n        if (onClose) {\n          onClose(e);\n        }\n      }\n    };\n\n    _this.onWrapperTransitionEnd = function (e) {\n      var _this$props = _this.props,\n          open = _this$props.open,\n          afterVisibleChange = _this$props.afterVisibleChange;\n\n      if (e.target === _this.contentWrapper && e.propertyName.match(/transform$/)) {\n        _this.dom.style.transition = '';\n\n        if (!open && _this.getCurrentDrawerSome()) {\n          document.body.style.overflowX = '';\n\n          if (_this.maskDom) {\n            _this.maskDom.style.left = '';\n            _this.maskDom.style.width = '';\n          }\n        }\n\n        if (afterVisibleChange) {\n          afterVisibleChange(!!open);\n        }\n      }\n    };\n\n    _this.openLevelTransition = function () {\n      var _this$props2 = _this.props,\n          open = _this$props2.open,\n          width = _this$props2.width,\n          height = _this$props2.height;\n\n      var _this$getHorizontalBo = _this.getHorizontalBoolAndPlacementName(),\n          isHorizontal = _this$getHorizontalBo.isHorizontal,\n          placementName = _this$getHorizontalBo.placementName;\n\n      var contentValue = _this.contentDom ? _this.contentDom.getBoundingClientRect()[isHorizontal ? 'width' : 'height'] : 0;\n      var value = (isHorizontal ? width : height) || contentValue;\n\n      _this.setLevelAndScrolling(open, placementName, value);\n    };\n\n    _this.setLevelTransform = function (open, placementName, value, right) {\n      var _this$props3 = _this.props,\n          placement = _this$props3.placement,\n          levelMove = _this$props3.levelMove,\n          duration = _this$props3.duration,\n          ease = _this$props3.ease,\n          showMask = _this$props3.showMask; // router 切换时可能会导至页面失去滚动条，所以需要时时获取。\n\n      _this.levelDom.forEach(function (dom) {\n        dom.style.transition = \"transform \".concat(duration, \" \").concat(ease);\n        addEventListener(dom, transitionEnd, _this.transitionEnd);\n        var levelValue = open ? value : 0;\n\n        if (levelMove) {\n          var $levelMove = transformArguments(levelMove, {\n            target: dom,\n            open: open\n          });\n          levelValue = open ? $levelMove[0] : $levelMove[1] || 0;\n        }\n\n        var $value = typeof levelValue === 'number' ? \"\".concat(levelValue, \"px\") : levelValue;\n        var placementPos = placement === 'left' || placement === 'top' ? $value : \"-\".concat($value);\n        placementPos = showMask && placement === 'right' && right ? \"calc(\".concat(placementPos, \" + \").concat(right, \"px)\") : placementPos;\n        dom.style.transform = levelValue ? \"\".concat(placementName, \"(\").concat(placementPos, \")\") : '';\n      });\n    };\n\n    _this.setLevelAndScrolling = function (open, placementName, value) {\n      var onChange = _this.props.onChange;\n\n      if (!windowIsUndefined) {\n        var right = document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight) && window.innerWidth > document.body.offsetWidth ? getScrollBarSize(true) : 0;\n\n        _this.setLevelTransform(open, placementName, value, right);\n\n        _this.toggleScrollingToDrawerAndBody(right);\n      }\n\n      if (onChange) {\n        onChange(open);\n      }\n    };\n\n    _this.toggleScrollingToDrawerAndBody = function (right) {\n      var _this$props4 = _this.props,\n          getContainer = _this$props4.getContainer,\n          showMask = _this$props4.showMask,\n          open = _this$props4.open;\n      var container = getContainer && getContainer(); // 处理 body 滚动\n\n      if (container && container.parentNode === document.body && showMask) {\n        var eventArray = ['touchstart'];\n        var domArray = [document.body, _this.maskDom, _this.handlerDom, _this.contentDom];\n\n        if (open && document.body.style.overflow !== 'hidden') {\n          if (right) {\n            _this.addScrollingEffect(right);\n          }\n\n          document.body.style.touchAction = 'none'; // 手机禁滚\n\n          domArray.forEach(function (item, i) {\n            if (!item) {\n              return;\n            }\n\n            addEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n          });\n        } else if (_this.getCurrentDrawerSome()) {\n          document.body.style.touchAction = '';\n\n          if (right) {\n            _this.remScrollingEffect(right);\n          } // 恢复事件\n\n\n          domArray.forEach(function (item, i) {\n            if (!item) {\n              return;\n            }\n\n            removeEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n          });\n        }\n      }\n    };\n\n    _this.addScrollingEffect = function (right) {\n      var _this$props5 = _this.props,\n          placement = _this$props5.placement,\n          duration = _this$props5.duration,\n          ease = _this$props5.ease;\n      var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n      var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n      _this.dom.style.transition = 'none';\n\n      switch (placement) {\n        case 'right':\n          _this.dom.style.transform = \"translateX(-\".concat(right, \"px)\");\n          break;\n\n        case 'top':\n        case 'bottom':\n          _this.dom.style.width = \"calc(100% - \".concat(right, \"px)\");\n          _this.dom.style.transform = 'translateZ(0)';\n          break;\n\n        default:\n          break;\n      }\n\n      clearTimeout(_this.timeout);\n      _this.timeout = setTimeout(function () {\n        if (_this.dom) {\n          _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(widthTransition);\n          _this.dom.style.width = '';\n          _this.dom.style.transform = '';\n        }\n      });\n    };\n\n    _this.remScrollingEffect = function (right) {\n      var _this$props6 = _this.props,\n          placement = _this$props6.placement,\n          duration = _this$props6.duration,\n          ease = _this$props6.ease;\n\n      if (transitionStr) {\n        document.body.style.overflowX = 'hidden';\n      }\n\n      _this.dom.style.transition = 'none';\n      var heightTransition;\n      var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n      var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n\n      switch (placement) {\n        case 'left':\n          {\n            _this.dom.style.width = '100%';\n            widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n            break;\n          }\n\n        case 'right':\n          {\n            _this.dom.style.transform = \"translateX(\".concat(right, \"px)\");\n            _this.dom.style.width = '100%';\n            widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n\n            if (_this.maskDom) {\n              _this.maskDom.style.left = \"-\".concat(right, \"px\");\n              _this.maskDom.style.width = \"calc(100% + \".concat(right, \"px)\");\n            }\n\n            break;\n          }\n\n        case 'top':\n        case 'bottom':\n          {\n            _this.dom.style.width = \"calc(100% + \".concat(right, \"px)\");\n            _this.dom.style.height = '100%';\n            _this.dom.style.transform = 'translateZ(0)';\n            heightTransition = \"height 0s \".concat(ease, \" \").concat(duration);\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      clearTimeout(_this.timeout);\n      _this.timeout = setTimeout(function () {\n        if (_this.dom) {\n          _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(heightTransition ? \"\".concat(heightTransition, \",\") : '').concat(widthTransition);\n          _this.dom.style.transform = '';\n          _this.dom.style.width = '';\n          _this.dom.style.height = '';\n        }\n      });\n    };\n\n    _this.getCurrentDrawerSome = function () {\n      return !Object.keys(currentDrawer).some(function (key) {\n        return currentDrawer[key];\n      });\n    };\n\n    _this.getLevelDom = function (_ref) {\n      var level = _ref.level,\n          getContainer = _ref.getContainer;\n\n      if (windowIsUndefined) {\n        return;\n      }\n\n      var container = getContainer && getContainer();\n      var parent = container ? container.parentNode : null;\n      _this.levelDom = [];\n\n      if (level === 'all') {\n        var children = parent ? Array.prototype.slice.call(parent.children) : [];\n        children.forEach(function (child) {\n          if (child.nodeName !== 'SCRIPT' && child.nodeName !== 'STYLE' && child.nodeName !== 'LINK' && child !== container) {\n            _this.levelDom.push(child);\n          }\n        });\n      } else if (level) {\n        dataToArray(level).forEach(function (key) {\n          document.querySelectorAll(key).forEach(function (item) {\n            _this.levelDom.push(item);\n          });\n        });\n      }\n    };\n\n    _this.getHorizontalBoolAndPlacementName = function () {\n      var placement = _this.props.placement;\n      var isHorizontal = placement === 'left' || placement === 'right';\n      var placementName = \"translate\".concat(isHorizontal ? 'X' : 'Y');\n      return {\n        isHorizontal: isHorizontal,\n        placementName: placementName\n      };\n    };\n\n    _this.state = {\n      _self: _assertThisInitialized(_this)\n    };\n    return _this;\n  }\n\n  _createClass(DrawerChild, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!windowIsUndefined) {\n        var passiveSupported = false;\n\n        try {\n          window.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n            get: function get() {\n              passiveSupported = true;\n              return null;\n            }\n          }));\n        } catch (err) {}\n\n        this.passive = passiveSupported ? {\n          passive: false\n        } : false;\n      }\n\n      var _this$props7 = this.props,\n          open = _this$props7.open,\n          getContainer = _this$props7.getContainer,\n          showMask = _this$props7.showMask,\n          autoFocus = _this$props7.autoFocus;\n      var container = getContainer && getContainer();\n      this.drawerId = \"drawer_id_\".concat(Number((Date.now() + Math.random()).toString().replace('.', Math.round(Math.random() * 9).toString())).toString(16));\n      this.getLevelDom(this.props);\n\n      if (open) {\n        if (container && container.parentNode === document.body) {\n          currentDrawer[this.drawerId] = open;\n        } // 默认打开状态时推出 level;\n\n\n        this.openLevelTransition();\n        this.forceUpdate(function () {\n          if (autoFocus) {\n            _this2.domFocus();\n          }\n        });\n\n        if (showMask) {\n          var _this$props$scrollLoc;\n\n          (_this$props$scrollLoc = this.props.scrollLocker) === null || _this$props$scrollLoc === void 0 ? void 0 : _this$props$scrollLoc.lock();\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props8 = this.props,\n          open = _this$props8.open,\n          getContainer = _this$props8.getContainer,\n          scrollLocker = _this$props8.scrollLocker,\n          showMask = _this$props8.showMask,\n          autoFocus = _this$props8.autoFocus;\n      var container = getContainer && getContainer();\n\n      if (open !== prevProps.open) {\n        if (container && container.parentNode === document.body) {\n          currentDrawer[this.drawerId] = !!open;\n        }\n\n        this.openLevelTransition();\n\n        if (open) {\n          if (autoFocus) {\n            this.domFocus();\n          }\n\n          if (showMask) {\n            scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.lock();\n          }\n        } else {\n          scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props9 = this.props,\n          open = _this$props9.open,\n          scrollLocker = _this$props9.scrollLocker;\n      delete currentDrawer[this.drawerId];\n\n      if (open) {\n        this.setLevelTransform(false);\n        document.body.style.touchAction = '';\n      }\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n    }\n  }, {\n    key: \"render\",\n    value: // tslint:disable-next-line:member-ordering\n    function render() {\n      var _classnames,\n          _this3 = this;\n\n      var _this$props10 = this.props,\n          className = _this$props10.className,\n          children = _this$props10.children,\n          style = _this$props10.style,\n          width = _this$props10.width,\n          height = _this$props10.height,\n          defaultOpen = _this$props10.defaultOpen,\n          $open = _this$props10.open,\n          prefixCls = _this$props10.prefixCls,\n          placement = _this$props10.placement,\n          level = _this$props10.level,\n          levelMove = _this$props10.levelMove,\n          ease = _this$props10.ease,\n          duration = _this$props10.duration,\n          getContainer = _this$props10.getContainer,\n          handler = _this$props10.handler,\n          onChange = _this$props10.onChange,\n          afterVisibleChange = _this$props10.afterVisibleChange,\n          showMask = _this$props10.showMask,\n          maskClosable = _this$props10.maskClosable,\n          maskStyle = _this$props10.maskStyle,\n          onClose = _this$props10.onClose,\n          onHandleClick = _this$props10.onHandleClick,\n          keyboard = _this$props10.keyboard,\n          getOpenCount = _this$props10.getOpenCount,\n          scrollLocker = _this$props10.scrollLocker,\n          contentWrapperStyle = _this$props10.contentWrapperStyle,\n          props = _objectWithoutProperties(_this$props10, _excluded); // 首次渲染都将是关闭状态。\n\n\n      var open = this.dom ? $open : false;\n      var wrapperClassName = classnames(prefixCls, (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefixCls, \"-\").concat(placement), true), _defineProperty(_classnames, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_classnames, className || '', !!className), _defineProperty(_classnames, 'no-mask', !showMask), _classnames));\n\n      var _this$getHorizontalBo2 = this.getHorizontalBoolAndPlacementName(),\n          placementName = _this$getHorizontalBo2.placementName; // 百分比与像素动画不同步，第一次打用后全用像素动画。\n      // const defaultValue = !this.contentDom || !level ? '100%' : `${value}px`;\n\n\n      var placementPos = placement === 'left' || placement === 'top' ? '-100%' : '100%';\n      var transform = open ? '' : \"\".concat(placementName, \"(\").concat(placementPos, \")\");\n      var handlerChildren = handler && /*#__PURE__*/React.cloneElement(handler, {\n        onClick: function onClick(e) {\n          if (handler.props.onClick) {\n            handler.props.onClick();\n          }\n\n          if (onHandleClick) {\n            onHandleClick(e);\n          }\n        },\n        ref: function ref(c) {\n          _this3.handlerDom = c;\n        }\n      });\n      return /*#__PURE__*/React.createElement(\"div\", _extends({}, omit(props, ['switchScrollingEffect', 'autoFocus']), {\n        tabIndex: -1,\n        className: wrapperClassName,\n        style: style,\n        ref: function ref(c) {\n          _this3.dom = c;\n        },\n        onKeyDown: open && keyboard ? this.onKeyDown : undefined,\n        onTransitionEnd: this.onWrapperTransitionEnd\n      }), showMask && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-mask\"),\n        onClick: maskClosable ? onClose : undefined,\n        style: maskStyle,\n        ref: function ref(c) {\n          _this3.maskDom = c;\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content-wrapper\"),\n        style: _objectSpread({\n          transform: transform,\n          msTransform: transform,\n          width: isNumeric(width) ? \"\".concat(width, \"px\") : width,\n          height: isNumeric(height) ? \"\".concat(height, \"px\") : height\n        }, contentWrapperStyle),\n        ref: function ref(c) {\n          _this3.contentWrapper = c;\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content\"),\n        ref: function ref(c) {\n          _this3.contentDom = c;\n        }\n      }, children), handlerChildren));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, _ref2) {\n      var prevProps = _ref2.prevProps,\n          _self = _ref2._self;\n      var nextState = {\n        prevProps: props\n      };\n\n      if (prevProps !== undefined) {\n        var placement = props.placement,\n            level = props.level;\n\n        if (placement !== prevProps.placement) {\n          // test 的 bug, 有动画过场，删除 dom\n          _self.contentDom = null;\n        }\n\n        if (level !== prevProps.level) {\n          _self.getLevelDom(props);\n        }\n      }\n\n      return nextState;\n    }\n  }]);\n\n  return DrawerChild;\n}(React.Component);\n\nexport default DrawerChild;","map":{"version":3,"names":["_extends","_objectSpread","_defineProperty","_objectWithoutProperties","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_createSuper","_excluded","React","classnames","getScrollBarSize","KeyCode","omit","addEventListener","dataToArray","getTouchParentScroll","isNumeric","removeEventListener","transformArguments","transitionEnd","transitionStr","windowIsUndefined","currentDrawer","DrawerChild","_React$Component","_super","props","_this","call","levelDom","dom","contentWrapper","contentDom","maskDom","handlerDom","drawerId","timeout","passive","startPos","domFocus","focus","removeStartHandler","e","touches","length","x","clientX","y","clientY","removeMoveHandler","changedTouches","currentTarget","differX","differY","target","cancelable","preventDefault","style","transition","onKeyDown","keyCode","ESC","onClose","stopPropagation","onWrapperTransitionEnd","_this$props","open","afterVisibleChange","propertyName","match","getCurrentDrawerSome","document","body","overflowX","left","width","openLevelTransition","_this$props2","height","_this$getHorizontalBo","getHorizontalBoolAndPlacementName","isHorizontal","placementName","contentValue","getBoundingClientRect","value","setLevelAndScrolling","setLevelTransform","right","_this$props3","placement","levelMove","duration","ease","showMask","forEach","concat","levelValue","$levelMove","$value","placementPos","transform","onChange","scrollHeight","window","innerHeight","documentElement","clientHeight","innerWidth","offsetWidth","toggleScrollingToDrawerAndBody","_this$props4","getContainer","container","parentNode","eventArray","domArray","overflow","addScrollingEffect","touchAction","item","i","remScrollingEffect","_this$props5","widthTransition","transformTransition","clearTimeout","setTimeout","_this$props6","heightTransition","Object","keys","some","key","getLevelDom","_ref","level","parent","children","Array","prototype","slice","child","nodeName","push","querySelectorAll","state","_self","componentDidMount","_this2","passiveSupported","defineProperty","get","err","_this$props7","autoFocus","Number","Date","now","Math","random","toString","replace","round","forceUpdate","_this$props$scrollLoc","scrollLocker","lock","componentDidUpdate","prevProps","_this$props8","unLock","componentWillUnmount","_this$props9","render","_classnames","_this3","_this$props10","className","defaultOpen","$open","prefixCls","handler","maskClosable","maskStyle","onHandleClick","keyboard","getOpenCount","contentWrapperStyle","wrapperClassName","_this$getHorizontalBo2","handlerChildren","cloneElement","onClick","ref","c","createElement","tabIndex","undefined","onTransitionEnd","msTransform","getDerivedStateFromProps","_ref2","nextState","Component"],"sources":["/Users/seancoleman/Projects/kanji/node_modules/rc-drawer/es/DrawerChild.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nvar _excluded = [\"className\", \"children\", \"style\", \"width\", \"height\", \"defaultOpen\", \"open\", \"prefixCls\", \"placement\", \"level\", \"levelMove\", \"ease\", \"duration\", \"getContainer\", \"handler\", \"onChange\", \"afterVisibleChange\", \"showMask\", \"maskClosable\", \"maskStyle\", \"onClose\", \"onHandleClick\", \"keyboard\", \"getOpenCount\", \"scrollLocker\", \"contentWrapperStyle\"];\nimport * as React from 'react';\nimport classnames from 'classnames';\nimport getScrollBarSize from \"rc-util/es/getScrollBarSize\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport omit from \"rc-util/es/omit\";\nimport { addEventListener, dataToArray, getTouchParentScroll, isNumeric, removeEventListener, transformArguments, transitionEnd, transitionStr, windowIsUndefined } from './utils';\nvar currentDrawer = {};\n\nvar DrawerChild = /*#__PURE__*/function (_React$Component) {\n  _inherits(DrawerChild, _React$Component);\n\n  var _super = _createSuper(DrawerChild);\n\n  function DrawerChild(props) {\n    var _this;\n\n    _classCallCheck(this, DrawerChild);\n\n    _this = _super.call(this, props);\n    _this.levelDom = void 0;\n    _this.dom = void 0;\n    _this.contentWrapper = void 0;\n    _this.contentDom = void 0;\n    _this.maskDom = void 0;\n    _this.handlerDom = void 0;\n    _this.drawerId = void 0;\n    _this.timeout = void 0;\n    _this.passive = void 0;\n    _this.startPos = void 0;\n\n    _this.domFocus = function () {\n      if (_this.dom) {\n        _this.dom.focus();\n      }\n    };\n\n    _this.removeStartHandler = function (e) {\n      if (e.touches.length > 1) {\n        // need clear the startPos when another touch event happens\n        _this.startPos = null;\n        return;\n      }\n\n      _this.startPos = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY\n      };\n    };\n\n    _this.removeMoveHandler = function (e) {\n      // the startPos may be null or undefined\n      if (e.changedTouches.length > 1 || !_this.startPos) {\n        return;\n      }\n\n      var currentTarget = e.currentTarget;\n      var differX = e.changedTouches[0].clientX - _this.startPos.x;\n      var differY = e.changedTouches[0].clientY - _this.startPos.y;\n\n      if ((currentTarget === _this.maskDom || currentTarget === _this.handlerDom || currentTarget === _this.contentDom && getTouchParentScroll(currentTarget, e.target, differX, differY)) && e.cancelable) {\n        e.preventDefault();\n      }\n    };\n\n    _this.transitionEnd = function (e) {\n      var dom = e.target;\n      removeEventListener(dom, transitionEnd, _this.transitionEnd);\n      dom.style.transition = '';\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.keyCode === KeyCode.ESC) {\n        var onClose = _this.props.onClose;\n        e.stopPropagation();\n\n        if (onClose) {\n          onClose(e);\n        }\n      }\n    };\n\n    _this.onWrapperTransitionEnd = function (e) {\n      var _this$props = _this.props,\n          open = _this$props.open,\n          afterVisibleChange = _this$props.afterVisibleChange;\n\n      if (e.target === _this.contentWrapper && e.propertyName.match(/transform$/)) {\n        _this.dom.style.transition = '';\n\n        if (!open && _this.getCurrentDrawerSome()) {\n          document.body.style.overflowX = '';\n\n          if (_this.maskDom) {\n            _this.maskDom.style.left = '';\n            _this.maskDom.style.width = '';\n          }\n        }\n\n        if (afterVisibleChange) {\n          afterVisibleChange(!!open);\n        }\n      }\n    };\n\n    _this.openLevelTransition = function () {\n      var _this$props2 = _this.props,\n          open = _this$props2.open,\n          width = _this$props2.width,\n          height = _this$props2.height;\n\n      var _this$getHorizontalBo = _this.getHorizontalBoolAndPlacementName(),\n          isHorizontal = _this$getHorizontalBo.isHorizontal,\n          placementName = _this$getHorizontalBo.placementName;\n\n      var contentValue = _this.contentDom ? _this.contentDom.getBoundingClientRect()[isHorizontal ? 'width' : 'height'] : 0;\n      var value = (isHorizontal ? width : height) || contentValue;\n\n      _this.setLevelAndScrolling(open, placementName, value);\n    };\n\n    _this.setLevelTransform = function (open, placementName, value, right) {\n      var _this$props3 = _this.props,\n          placement = _this$props3.placement,\n          levelMove = _this$props3.levelMove,\n          duration = _this$props3.duration,\n          ease = _this$props3.ease,\n          showMask = _this$props3.showMask; // router 切换时可能会导至页面失去滚动条，所以需要时时获取。\n\n      _this.levelDom.forEach(function (dom) {\n        dom.style.transition = \"transform \".concat(duration, \" \").concat(ease);\n        addEventListener(dom, transitionEnd, _this.transitionEnd);\n        var levelValue = open ? value : 0;\n\n        if (levelMove) {\n          var $levelMove = transformArguments(levelMove, {\n            target: dom,\n            open: open\n          });\n          levelValue = open ? $levelMove[0] : $levelMove[1] || 0;\n        }\n\n        var $value = typeof levelValue === 'number' ? \"\".concat(levelValue, \"px\") : levelValue;\n        var placementPos = placement === 'left' || placement === 'top' ? $value : \"-\".concat($value);\n        placementPos = showMask && placement === 'right' && right ? \"calc(\".concat(placementPos, \" + \").concat(right, \"px)\") : placementPos;\n        dom.style.transform = levelValue ? \"\".concat(placementName, \"(\").concat(placementPos, \")\") : '';\n      });\n    };\n\n    _this.setLevelAndScrolling = function (open, placementName, value) {\n      var onChange = _this.props.onChange;\n\n      if (!windowIsUndefined) {\n        var right = document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight) && window.innerWidth > document.body.offsetWidth ? getScrollBarSize(true) : 0;\n\n        _this.setLevelTransform(open, placementName, value, right);\n\n        _this.toggleScrollingToDrawerAndBody(right);\n      }\n\n      if (onChange) {\n        onChange(open);\n      }\n    };\n\n    _this.toggleScrollingToDrawerAndBody = function (right) {\n      var _this$props4 = _this.props,\n          getContainer = _this$props4.getContainer,\n          showMask = _this$props4.showMask,\n          open = _this$props4.open;\n      var container = getContainer && getContainer(); // 处理 body 滚动\n\n      if (container && container.parentNode === document.body && showMask) {\n        var eventArray = ['touchstart'];\n        var domArray = [document.body, _this.maskDom, _this.handlerDom, _this.contentDom];\n\n        if (open && document.body.style.overflow !== 'hidden') {\n          if (right) {\n            _this.addScrollingEffect(right);\n          }\n\n          document.body.style.touchAction = 'none'; // 手机禁滚\n\n          domArray.forEach(function (item, i) {\n            if (!item) {\n              return;\n            }\n\n            addEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n          });\n        } else if (_this.getCurrentDrawerSome()) {\n          document.body.style.touchAction = '';\n\n          if (right) {\n            _this.remScrollingEffect(right);\n          } // 恢复事件\n\n\n          domArray.forEach(function (item, i) {\n            if (!item) {\n              return;\n            }\n\n            removeEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n          });\n        }\n      }\n    };\n\n    _this.addScrollingEffect = function (right) {\n      var _this$props5 = _this.props,\n          placement = _this$props5.placement,\n          duration = _this$props5.duration,\n          ease = _this$props5.ease;\n      var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n      var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n      _this.dom.style.transition = 'none';\n\n      switch (placement) {\n        case 'right':\n          _this.dom.style.transform = \"translateX(-\".concat(right, \"px)\");\n          break;\n\n        case 'top':\n        case 'bottom':\n          _this.dom.style.width = \"calc(100% - \".concat(right, \"px)\");\n          _this.dom.style.transform = 'translateZ(0)';\n          break;\n\n        default:\n          break;\n      }\n\n      clearTimeout(_this.timeout);\n      _this.timeout = setTimeout(function () {\n        if (_this.dom) {\n          _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(widthTransition);\n          _this.dom.style.width = '';\n          _this.dom.style.transform = '';\n        }\n      });\n    };\n\n    _this.remScrollingEffect = function (right) {\n      var _this$props6 = _this.props,\n          placement = _this$props6.placement,\n          duration = _this$props6.duration,\n          ease = _this$props6.ease;\n\n      if (transitionStr) {\n        document.body.style.overflowX = 'hidden';\n      }\n\n      _this.dom.style.transition = 'none';\n      var heightTransition;\n      var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n      var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n\n      switch (placement) {\n        case 'left':\n          {\n            _this.dom.style.width = '100%';\n            widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n            break;\n          }\n\n        case 'right':\n          {\n            _this.dom.style.transform = \"translateX(\".concat(right, \"px)\");\n            _this.dom.style.width = '100%';\n            widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n\n            if (_this.maskDom) {\n              _this.maskDom.style.left = \"-\".concat(right, \"px\");\n              _this.maskDom.style.width = \"calc(100% + \".concat(right, \"px)\");\n            }\n\n            break;\n          }\n\n        case 'top':\n        case 'bottom':\n          {\n            _this.dom.style.width = \"calc(100% + \".concat(right, \"px)\");\n            _this.dom.style.height = '100%';\n            _this.dom.style.transform = 'translateZ(0)';\n            heightTransition = \"height 0s \".concat(ease, \" \").concat(duration);\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      clearTimeout(_this.timeout);\n      _this.timeout = setTimeout(function () {\n        if (_this.dom) {\n          _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(heightTransition ? \"\".concat(heightTransition, \",\") : '').concat(widthTransition);\n          _this.dom.style.transform = '';\n          _this.dom.style.width = '';\n          _this.dom.style.height = '';\n        }\n      });\n    };\n\n    _this.getCurrentDrawerSome = function () {\n      return !Object.keys(currentDrawer).some(function (key) {\n        return currentDrawer[key];\n      });\n    };\n\n    _this.getLevelDom = function (_ref) {\n      var level = _ref.level,\n          getContainer = _ref.getContainer;\n\n      if (windowIsUndefined) {\n        return;\n      }\n\n      var container = getContainer && getContainer();\n      var parent = container ? container.parentNode : null;\n      _this.levelDom = [];\n\n      if (level === 'all') {\n        var children = parent ? Array.prototype.slice.call(parent.children) : [];\n        children.forEach(function (child) {\n          if (child.nodeName !== 'SCRIPT' && child.nodeName !== 'STYLE' && child.nodeName !== 'LINK' && child !== container) {\n            _this.levelDom.push(child);\n          }\n        });\n      } else if (level) {\n        dataToArray(level).forEach(function (key) {\n          document.querySelectorAll(key).forEach(function (item) {\n            _this.levelDom.push(item);\n          });\n        });\n      }\n    };\n\n    _this.getHorizontalBoolAndPlacementName = function () {\n      var placement = _this.props.placement;\n      var isHorizontal = placement === 'left' || placement === 'right';\n      var placementName = \"translate\".concat(isHorizontal ? 'X' : 'Y');\n      return {\n        isHorizontal: isHorizontal,\n        placementName: placementName\n      };\n    };\n\n    _this.state = {\n      _self: _assertThisInitialized(_this)\n    };\n    return _this;\n  }\n\n  _createClass(DrawerChild, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!windowIsUndefined) {\n        var passiveSupported = false;\n\n        try {\n          window.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n            get: function get() {\n              passiveSupported = true;\n              return null;\n            }\n          }));\n        } catch (err) {}\n\n        this.passive = passiveSupported ? {\n          passive: false\n        } : false;\n      }\n\n      var _this$props7 = this.props,\n          open = _this$props7.open,\n          getContainer = _this$props7.getContainer,\n          showMask = _this$props7.showMask,\n          autoFocus = _this$props7.autoFocus;\n      var container = getContainer && getContainer();\n      this.drawerId = \"drawer_id_\".concat(Number((Date.now() + Math.random()).toString().replace('.', Math.round(Math.random() * 9).toString())).toString(16));\n      this.getLevelDom(this.props);\n\n      if (open) {\n        if (container && container.parentNode === document.body) {\n          currentDrawer[this.drawerId] = open;\n        } // 默认打开状态时推出 level;\n\n\n        this.openLevelTransition();\n        this.forceUpdate(function () {\n          if (autoFocus) {\n            _this2.domFocus();\n          }\n        });\n\n        if (showMask) {\n          var _this$props$scrollLoc;\n\n          (_this$props$scrollLoc = this.props.scrollLocker) === null || _this$props$scrollLoc === void 0 ? void 0 : _this$props$scrollLoc.lock();\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props8 = this.props,\n          open = _this$props8.open,\n          getContainer = _this$props8.getContainer,\n          scrollLocker = _this$props8.scrollLocker,\n          showMask = _this$props8.showMask,\n          autoFocus = _this$props8.autoFocus;\n      var container = getContainer && getContainer();\n\n      if (open !== prevProps.open) {\n        if (container && container.parentNode === document.body) {\n          currentDrawer[this.drawerId] = !!open;\n        }\n\n        this.openLevelTransition();\n\n        if (open) {\n          if (autoFocus) {\n            this.domFocus();\n          }\n\n          if (showMask) {\n            scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.lock();\n          }\n        } else {\n          scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props9 = this.props,\n          open = _this$props9.open,\n          scrollLocker = _this$props9.scrollLocker;\n      delete currentDrawer[this.drawerId];\n\n      if (open) {\n        this.setLevelTransform(false);\n        document.body.style.touchAction = '';\n      }\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n    }\n  }, {\n    key: \"render\",\n    value: // tslint:disable-next-line:member-ordering\n    function render() {\n      var _classnames,\n          _this3 = this;\n\n      var _this$props10 = this.props,\n          className = _this$props10.className,\n          children = _this$props10.children,\n          style = _this$props10.style,\n          width = _this$props10.width,\n          height = _this$props10.height,\n          defaultOpen = _this$props10.defaultOpen,\n          $open = _this$props10.open,\n          prefixCls = _this$props10.prefixCls,\n          placement = _this$props10.placement,\n          level = _this$props10.level,\n          levelMove = _this$props10.levelMove,\n          ease = _this$props10.ease,\n          duration = _this$props10.duration,\n          getContainer = _this$props10.getContainer,\n          handler = _this$props10.handler,\n          onChange = _this$props10.onChange,\n          afterVisibleChange = _this$props10.afterVisibleChange,\n          showMask = _this$props10.showMask,\n          maskClosable = _this$props10.maskClosable,\n          maskStyle = _this$props10.maskStyle,\n          onClose = _this$props10.onClose,\n          onHandleClick = _this$props10.onHandleClick,\n          keyboard = _this$props10.keyboard,\n          getOpenCount = _this$props10.getOpenCount,\n          scrollLocker = _this$props10.scrollLocker,\n          contentWrapperStyle = _this$props10.contentWrapperStyle,\n          props = _objectWithoutProperties(_this$props10, _excluded); // 首次渲染都将是关闭状态。\n\n\n      var open = this.dom ? $open : false;\n      var wrapperClassName = classnames(prefixCls, (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefixCls, \"-\").concat(placement), true), _defineProperty(_classnames, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_classnames, className || '', !!className), _defineProperty(_classnames, 'no-mask', !showMask), _classnames));\n\n      var _this$getHorizontalBo2 = this.getHorizontalBoolAndPlacementName(),\n          placementName = _this$getHorizontalBo2.placementName; // 百分比与像素动画不同步，第一次打用后全用像素动画。\n      // const defaultValue = !this.contentDom || !level ? '100%' : `${value}px`;\n\n\n      var placementPos = placement === 'left' || placement === 'top' ? '-100%' : '100%';\n      var transform = open ? '' : \"\".concat(placementName, \"(\").concat(placementPos, \")\");\n      var handlerChildren = handler && /*#__PURE__*/React.cloneElement(handler, {\n        onClick: function onClick(e) {\n          if (handler.props.onClick) {\n            handler.props.onClick();\n          }\n\n          if (onHandleClick) {\n            onHandleClick(e);\n          }\n        },\n        ref: function ref(c) {\n          _this3.handlerDom = c;\n        }\n      });\n      return /*#__PURE__*/React.createElement(\"div\", _extends({}, omit(props, ['switchScrollingEffect', 'autoFocus']), {\n        tabIndex: -1,\n        className: wrapperClassName,\n        style: style,\n        ref: function ref(c) {\n          _this3.dom = c;\n        },\n        onKeyDown: open && keyboard ? this.onKeyDown : undefined,\n        onTransitionEnd: this.onWrapperTransitionEnd\n      }), showMask && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-mask\"),\n        onClick: maskClosable ? onClose : undefined,\n        style: maskStyle,\n        ref: function ref(c) {\n          _this3.maskDom = c;\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content-wrapper\"),\n        style: _objectSpread({\n          transform: transform,\n          msTransform: transform,\n          width: isNumeric(width) ? \"\".concat(width, \"px\") : width,\n          height: isNumeric(height) ? \"\".concat(height, \"px\") : height\n        }, contentWrapperStyle),\n        ref: function ref(c) {\n          _this3.contentWrapper = c;\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content\"),\n        ref: function ref(c) {\n          _this3.contentDom = c;\n        }\n      }, children), handlerChildren));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, _ref2) {\n      var prevProps = _ref2.prevProps,\n          _self = _ref2._self;\n      var nextState = {\n        prevProps: props\n      };\n\n      if (prevProps !== undefined) {\n        var placement = props.placement,\n            level = props.level;\n\n        if (placement !== prevProps.placement) {\n          // test 的 bug, 有动画过场，删除 dom\n          _self.contentDom = null;\n        }\n\n        if (level !== prevProps.level) {\n          _self.getLevelDom(props);\n        }\n      }\n\n      return nextState;\n    }\n  }]);\n\n  return DrawerChild;\n}(React.Component);\n\nexport default DrawerChild;"],"mappings":"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"},"metadata":{},"sourceType":"module"}