{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nvar _excluded = [\"name\"];\nimport toChildrenArray from \"rc-util/es/Children/toArray\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport FieldContext, { HOOK_MARK } from './FieldContext';\nimport { toArray } from './utils/typeUtil';\nimport { validateRules } from './utils/validateUtil';\nimport { containsNamePath, defaultGetValueFromEvent, getNamePath, getValue } from './utils/valueUtil';\nvar EMPTY_ERRORS = [];\n\nfunction requireUpdate(shouldUpdate, prev, next, prevValue, nextValue, info) {\n  if (typeof shouldUpdate === 'function') {\n    return shouldUpdate(prev, next, 'source' in info ? {\n      source: info.source\n    } : {});\n  }\n\n  return prevValue !== nextValue;\n} // We use Class instead of Hooks here since it will cost much code by using Hooks.\n\n\nvar Field = /*#__PURE__*/function (_React$Component) {\n  _inherits(Field, _React$Component);\n\n  var _super = _createSuper(Field);\n  /**\n   * Follow state should not management in State since it will async update by React.\n   * This makes first render of form can not get correct state value.\n   */\n\n  /**\n   * Mark when touched & validated. Currently only used for `dependencies`.\n   * Note that we do not think field with `initialValue` is dirty\n   * but this will be by `isFieldDirty` func.\n   */\n  // ============================== Subscriptions ==============================\n\n\n  function Field(props) {\n    var _this;\n\n    _classCallCheck(this, Field);\n\n    _this = _super.call(this, props); // Register on init\n\n    _this.state = {\n      resetCount: 0\n    };\n    _this.cancelRegisterFunc = null;\n    _this.mounted = false;\n    _this.touched = false;\n    _this.dirty = false;\n    _this.validatePromise = null;\n    _this.prevValidating = void 0;\n    _this.errors = EMPTY_ERRORS;\n    _this.warnings = EMPTY_ERRORS;\n\n    _this.cancelRegister = function () {\n      var _this$props = _this.props,\n          preserve = _this$props.preserve,\n          isListField = _this$props.isListField,\n          name = _this$props.name;\n\n      if (_this.cancelRegisterFunc) {\n        _this.cancelRegisterFunc(isListField, preserve, getNamePath(name));\n      }\n\n      _this.cancelRegisterFunc = null;\n    };\n\n    _this.getNamePath = function () {\n      var _this$props2 = _this.props,\n          name = _this$props2.name,\n          fieldContext = _this$props2.fieldContext;\n      var _fieldContext$prefixN = fieldContext.prefixName,\n          prefixName = _fieldContext$prefixN === void 0 ? [] : _fieldContext$prefixN;\n      return name !== undefined ? [].concat(_toConsumableArray(prefixName), _toConsumableArray(name)) : [];\n    };\n\n    _this.getRules = function () {\n      var _this$props3 = _this.props,\n          _this$props3$rules = _this$props3.rules,\n          rules = _this$props3$rules === void 0 ? [] : _this$props3$rules,\n          fieldContext = _this$props3.fieldContext;\n      return rules.map(function (rule) {\n        if (typeof rule === 'function') {\n          return rule(fieldContext);\n        }\n\n        return rule;\n      });\n    };\n\n    _this.refresh = function () {\n      if (!_this.mounted) return;\n      /**\n       * Clean up current node.\n       */\n\n      _this.setState(function (_ref) {\n        var resetCount = _ref.resetCount;\n        return {\n          resetCount: resetCount + 1\n        };\n      });\n    };\n\n    _this.triggerMetaEvent = function (destroy) {\n      var onMetaChange = _this.props.onMetaChange;\n      onMetaChange === null || onMetaChange === void 0 ? void 0 : onMetaChange(_objectSpread(_objectSpread({}, _this.getMeta()), {}, {\n        destroy: destroy\n      }));\n    };\n\n    _this.onStoreChange = function (prevStore, namePathList, info) {\n      var _this$props4 = _this.props,\n          shouldUpdate = _this$props4.shouldUpdate,\n          _this$props4$dependen = _this$props4.dependencies,\n          dependencies = _this$props4$dependen === void 0 ? [] : _this$props4$dependen,\n          onReset = _this$props4.onReset;\n      var store = info.store;\n\n      var namePath = _this.getNamePath();\n\n      var prevValue = _this.getValue(prevStore);\n\n      var curValue = _this.getValue(store);\n\n      var namePathMatch = namePathList && containsNamePath(namePathList, namePath); // `setFieldsValue` is a quick access to update related status\n\n      if (info.type === 'valueUpdate' && info.source === 'external' && prevValue !== curValue) {\n        _this.touched = true;\n        _this.dirty = true;\n        _this.validatePromise = null;\n        _this.errors = EMPTY_ERRORS;\n        _this.warnings = EMPTY_ERRORS;\n\n        _this.triggerMetaEvent();\n      }\n\n      switch (info.type) {\n        case 'reset':\n          if (!namePathList || namePathMatch) {\n            // Clean up state\n            _this.touched = false;\n            _this.dirty = false;\n            _this.validatePromise = null;\n            _this.errors = EMPTY_ERRORS;\n            _this.warnings = EMPTY_ERRORS;\n\n            _this.triggerMetaEvent();\n\n            onReset === null || onReset === void 0 ? void 0 : onReset();\n\n            _this.refresh();\n\n            return;\n          }\n\n          break;\n\n        /**\n         * In case field with `preserve = false` nest deps like:\n         * - A = 1 => show B\n         * - B = 1 => show C\n         * - Reset A, need clean B, C\n         */\n\n        case 'remove':\n          {\n            if (shouldUpdate) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        case 'setField':\n          {\n            if (namePathMatch) {\n              var data = info.data;\n\n              if ('touched' in data) {\n                _this.touched = data.touched;\n              }\n\n              if ('validating' in data && !('originRCField' in data)) {\n                _this.validatePromise = data.validating ? Promise.resolve([]) : null;\n              }\n\n              if ('errors' in data) {\n                _this.errors = data.errors || EMPTY_ERRORS;\n              }\n\n              if ('warnings' in data) {\n                _this.warnings = data.warnings || EMPTY_ERRORS;\n              }\n\n              _this.dirty = true;\n\n              _this.triggerMetaEvent();\n\n              _this.reRender();\n\n              return;\n            } // Handle update by `setField` with `shouldUpdate`\n\n\n            if (shouldUpdate && !namePath.length && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        case 'dependenciesUpdate':\n          {\n            /**\n             * Trigger when marked `dependencies` updated. Related fields will all update\n             */\n            var dependencyList = dependencies.map(getNamePath); // No need for `namePathMath` check and `shouldUpdate` check, since `valueUpdate` will be\n            // emitted earlier and they will work there\n            // If set it may cause unnecessary twice rerendering\n\n            if (dependencyList.some(function (dependency) {\n              return containsNamePath(info.relatedFields, dependency);\n            })) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        default:\n          // 1. If `namePath` exists in `namePathList`, means it's related value and should update\n          //      For example <List name=\"list\"><Field name={['list', 0]}></List>\n          //      If `namePathList` is [['list']] (List value update), Field should be updated\n          //      If `namePathList` is [['list', 0]] (Field value update), List shouldn't be updated\n          // 2.\n          //   2.1 If `dependencies` is set, `name` is not set and `shouldUpdate` is not set,\n          //       don't use `shouldUpdate`. `dependencies` is view as a shortcut if `shouldUpdate`\n          //       is not provided\n          //   2.2 If `shouldUpdate` provided, use customize logic to update the field\n          //       else to check if value changed\n          if (namePathMatch || (!dependencies.length || namePath.length || shouldUpdate) && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n            _this.reRender();\n\n            return;\n          }\n\n          break;\n      }\n\n      if (shouldUpdate === true) {\n        _this.reRender();\n      }\n    };\n\n    _this.validateRules = function (options) {\n      // We should fixed namePath & value to avoid developer change then by form function\n      var namePath = _this.getNamePath();\n\n      var currentValue = _this.getValue(); // Force change to async to avoid rule OOD under renderProps field\n\n\n      var rootPromise = Promise.resolve().then(function () {\n        if (!_this.mounted) {\n          return [];\n        }\n\n        var _this$props5 = _this.props,\n            _this$props5$validate = _this$props5.validateFirst,\n            validateFirst = _this$props5$validate === void 0 ? false : _this$props5$validate,\n            messageVariables = _this$props5.messageVariables;\n\n        var _ref2 = options || {},\n            triggerName = _ref2.triggerName;\n\n        var filteredRules = _this.getRules();\n\n        if (triggerName) {\n          filteredRules = filteredRules.filter(function (rule) {\n            var validateTrigger = rule.validateTrigger;\n\n            if (!validateTrigger) {\n              return true;\n            }\n\n            var triggerList = toArray(validateTrigger);\n            return triggerList.includes(triggerName);\n          });\n        }\n\n        var promise = validateRules(namePath, currentValue, filteredRules, options, validateFirst, messageVariables);\n        promise.catch(function (e) {\n          return e;\n        }).then(function () {\n          var ruleErrors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : EMPTY_ERRORS;\n\n          if (_this.validatePromise === rootPromise) {\n            _this.validatePromise = null; // Get errors & warnings\n\n            var nextErrors = [];\n            var nextWarnings = [];\n            ruleErrors.forEach(function (_ref3) {\n              var warningOnly = _ref3.rule.warningOnly,\n                  _ref3$errors = _ref3.errors,\n                  errors = _ref3$errors === void 0 ? EMPTY_ERRORS : _ref3$errors;\n\n              if (warningOnly) {\n                nextWarnings.push.apply(nextWarnings, _toConsumableArray(errors));\n              } else {\n                nextErrors.push.apply(nextErrors, _toConsumableArray(errors));\n              }\n            });\n            _this.errors = nextErrors;\n            _this.warnings = nextWarnings;\n\n            _this.triggerMetaEvent();\n\n            _this.reRender();\n          }\n        });\n        return promise;\n      });\n      _this.validatePromise = rootPromise;\n      _this.dirty = true;\n      _this.errors = EMPTY_ERRORS;\n      _this.warnings = EMPTY_ERRORS;\n\n      _this.triggerMetaEvent(); // Force trigger re-render since we need sync renderProps with new meta\n\n\n      _this.reRender();\n\n      return rootPromise;\n    };\n\n    _this.isFieldValidating = function () {\n      return !!_this.validatePromise;\n    };\n\n    _this.isFieldTouched = function () {\n      return _this.touched;\n    };\n\n    _this.isFieldDirty = function () {\n      // Touched or validate or has initialValue\n      if (_this.dirty || _this.props.initialValue !== undefined) {\n        return true;\n      } // Form set initialValue\n\n\n      var fieldContext = _this.props.fieldContext;\n\n      var _fieldContext$getInte = fieldContext.getInternalHooks(HOOK_MARK),\n          getInitialValue = _fieldContext$getInte.getInitialValue;\n\n      if (getInitialValue(_this.getNamePath()) !== undefined) {\n        return true;\n      }\n\n      return false;\n    };\n\n    _this.getErrors = function () {\n      return _this.errors;\n    };\n\n    _this.getWarnings = function () {\n      return _this.warnings;\n    };\n\n    _this.isListField = function () {\n      return _this.props.isListField;\n    };\n\n    _this.isList = function () {\n      return _this.props.isList;\n    };\n\n    _this.isPreserve = function () {\n      return _this.props.preserve;\n    };\n\n    _this.getMeta = function () {\n      // Make error & validating in cache to save perf\n      _this.prevValidating = _this.isFieldValidating();\n      var meta = {\n        touched: _this.isFieldTouched(),\n        validating: _this.prevValidating,\n        errors: _this.errors,\n        warnings: _this.warnings,\n        name: _this.getNamePath()\n      };\n      return meta;\n    };\n\n    _this.getOnlyChild = function (children) {\n      // Support render props\n      if (typeof children === 'function') {\n        var meta = _this.getMeta();\n\n        return _objectSpread(_objectSpread({}, _this.getOnlyChild(children(_this.getControlled(), meta, _this.props.fieldContext))), {}, {\n          isFunction: true\n        });\n      } // Filed element only\n\n\n      var childList = toChildrenArray(children);\n\n      if (childList.length !== 1 || ! /*#__PURE__*/React.isValidElement(childList[0])) {\n        return {\n          child: childList,\n          isFunction: false\n        };\n      }\n\n      return {\n        child: childList[0],\n        isFunction: false\n      };\n    };\n\n    _this.getValue = function (store) {\n      var getFieldsValue = _this.props.fieldContext.getFieldsValue;\n\n      var namePath = _this.getNamePath();\n\n      return getValue(store || getFieldsValue(true), namePath);\n    };\n\n    _this.getControlled = function () {\n      var childProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props6 = _this.props,\n          trigger = _this$props6.trigger,\n          validateTrigger = _this$props6.validateTrigger,\n          getValueFromEvent = _this$props6.getValueFromEvent,\n          normalize = _this$props6.normalize,\n          valuePropName = _this$props6.valuePropName,\n          getValueProps = _this$props6.getValueProps,\n          fieldContext = _this$props6.fieldContext;\n      var mergedValidateTrigger = validateTrigger !== undefined ? validateTrigger : fieldContext.validateTrigger;\n\n      var namePath = _this.getNamePath();\n\n      var getInternalHooks = fieldContext.getInternalHooks,\n          getFieldsValue = fieldContext.getFieldsValue;\n\n      var _getInternalHooks = getInternalHooks(HOOK_MARK),\n          dispatch = _getInternalHooks.dispatch;\n\n      var value = _this.getValue();\n\n      var mergedGetValueProps = getValueProps || function (val) {\n        return _defineProperty({}, valuePropName, val);\n      }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      var originTriggerFunc = childProps[trigger];\n\n      var control = _objectSpread(_objectSpread({}, childProps), mergedGetValueProps(value)); // Add trigger\n\n\n      control[trigger] = function () {\n        // Mark as touched\n        _this.touched = true;\n        _this.dirty = true;\n\n        _this.triggerMetaEvent();\n\n        var newValue;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (getValueFromEvent) {\n          newValue = getValueFromEvent.apply(void 0, args);\n        } else {\n          newValue = defaultGetValueFromEvent.apply(void 0, [valuePropName].concat(args));\n        }\n\n        if (normalize) {\n          newValue = normalize(newValue, value, getFieldsValue(true));\n        }\n\n        dispatch({\n          type: 'updateValue',\n          namePath: namePath,\n          value: newValue\n        });\n\n        if (originTriggerFunc) {\n          originTriggerFunc.apply(void 0, args);\n        }\n      }; // Add validateTrigger\n\n\n      var validateTriggerList = toArray(mergedValidateTrigger || []);\n      validateTriggerList.forEach(function (triggerName) {\n        // Wrap additional function of component, so that we can get latest value from store\n        var originTrigger = control[triggerName];\n\n        control[triggerName] = function () {\n          if (originTrigger) {\n            originTrigger.apply(void 0, arguments);\n          } // Always use latest rules\n\n\n          var rules = _this.props.rules;\n\n          if (rules && rules.length) {\n            // We dispatch validate to root,\n            // since it will update related data with other field with same name\n            dispatch({\n              type: 'validateField',\n              namePath: namePath,\n              triggerName: triggerName\n            });\n          }\n        };\n      });\n      return control;\n    };\n\n    if (props.fieldContext) {\n      var getInternalHooks = props.fieldContext.getInternalHooks;\n\n      var _getInternalHooks2 = getInternalHooks(HOOK_MARK),\n          initEntityValue = _getInternalHooks2.initEntityValue;\n\n      initEntityValue(_assertThisInitialized(_this));\n    }\n\n    return _this;\n  }\n\n  _createClass(Field, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props7 = this.props,\n          shouldUpdate = _this$props7.shouldUpdate,\n          fieldContext = _this$props7.fieldContext;\n      this.mounted = true; // Register on init\n\n      if (fieldContext) {\n        var getInternalHooks = fieldContext.getInternalHooks;\n\n        var _getInternalHooks3 = getInternalHooks(HOOK_MARK),\n            registerField = _getInternalHooks3.registerField;\n\n        this.cancelRegisterFunc = registerField(this);\n      } // One more render for component in case fields not ready\n\n\n      if (shouldUpdate === true) {\n        this.reRender();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRegister();\n      this.triggerMetaEvent(true);\n      this.mounted = false;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (!this.mounted) return;\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var resetCount = this.state.resetCount;\n      var children = this.props.children;\n\n      var _this$getOnlyChild = this.getOnlyChild(children),\n          child = _this$getOnlyChild.child,\n          isFunction = _this$getOnlyChild.isFunction; // Not need to `cloneElement` since user can handle this in render function self\n\n\n      var returnChildNode;\n\n      if (isFunction) {\n        returnChildNode = child;\n      } else if ( /*#__PURE__*/React.isValidElement(child)) {\n        returnChildNode = /*#__PURE__*/React.cloneElement(child, this.getControlled(child.props));\n      } else {\n        warning(!child, '`children` of Field is not validate ReactElement.');\n        returnChildNode = child;\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: resetCount\n      }, returnChildNode);\n    }\n  }]);\n\n  return Field;\n}(React.Component);\n\nField.contextType = FieldContext;\nField.defaultProps = {\n  trigger: 'onChange',\n  valuePropName: 'value'\n};\n\nfunction WrapperField(_ref5) {\n  var name = _ref5.name,\n      restProps = _objectWithoutProperties(_ref5, _excluded);\n\n  var fieldContext = React.useContext(FieldContext);\n  var namePath = name !== undefined ? getNamePath(name) : undefined;\n  var key = 'keep';\n\n  if (!restProps.isListField) {\n    key = \"_\".concat((namePath || []).join('_'));\n  } // Warning if it's a directly list field.\n  // We can still support multiple level field preserve.\n\n\n  if (process.env.NODE_ENV !== 'production' && restProps.preserve === false && restProps.isListField && namePath.length <= 1) {\n    warning(false, '`preserve` should not apply on Form.List fields.');\n  }\n\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    key: key,\n    name: namePath\n  }, restProps, {\n    fieldContext: fieldContext\n  }));\n}\n\nexport default WrapperField;","map":{"version":3,"names":["_extends","_objectWithoutProperties","_defineProperty","_objectSpread","_toConsumableArray","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_createSuper","_excluded","toChildrenArray","warning","React","FieldContext","HOOK_MARK","toArray","validateRules","containsNamePath","defaultGetValueFromEvent","getNamePath","getValue","EMPTY_ERRORS","requireUpdate","shouldUpdate","prev","next","prevValue","nextValue","info","source","Field","_React$Component","_super","props","_this","call","state","resetCount","cancelRegisterFunc","mounted","touched","dirty","validatePromise","prevValidating","errors","warnings","cancelRegister","_this$props","preserve","isListField","name","_this$props2","fieldContext","_fieldContext$prefixN","prefixName","undefined","concat","getRules","_this$props3","_this$props3$rules","rules","map","rule","refresh","setState","_ref","triggerMetaEvent","destroy","onMetaChange","getMeta","onStoreChange","prevStore","namePathList","_this$props4","_this$props4$dependen","dependencies","onReset","store","namePath","curValue","namePathMatch","type","reRender","data","validating","Promise","resolve","length","dependencyList","some","dependency","relatedFields","options","currentValue","rootPromise","then","_this$props5","_this$props5$validate","validateFirst","messageVariables","_ref2","triggerName","filteredRules","filter","validateTrigger","triggerList","includes","promise","catch","e","ruleErrors","arguments","nextErrors","nextWarnings","forEach","_ref3","warningOnly","_ref3$errors","push","apply","isFieldValidating","isFieldTouched","isFieldDirty","initialValue","_fieldContext$getInte","getInternalHooks","getInitialValue","getErrors","getWarnings","isList","isPreserve","meta","getOnlyChild","children","getControlled","isFunction","childList","isValidElement","child","getFieldsValue","childProps","_this$props6","trigger","getValueFromEvent","normalize","valuePropName","getValueProps","mergedValidateTrigger","_getInternalHooks","dispatch","value","mergedGetValueProps","val","originTriggerFunc","control","newValue","_len","args","Array","_key","validateTriggerList","originTrigger","_getInternalHooks2","initEntityValue","key","componentDidMount","_this$props7","_getInternalHooks3","registerField","componentWillUnmount","forceUpdate","render","_this$getOnlyChild","returnChildNode","cloneElement","createElement","Fragment","Component","contextType","defaultProps","WrapperField","_ref5","restProps","useContext","join","process","env","NODE_ENV"],"sources":["/Users/seancoleman/Projects/kanji/node_modules/rc-field-form/es/Field.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nvar _excluded = [\"name\"];\nimport toChildrenArray from \"rc-util/es/Children/toArray\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport FieldContext, { HOOK_MARK } from './FieldContext';\nimport { toArray } from './utils/typeUtil';\nimport { validateRules } from './utils/validateUtil';\nimport { containsNamePath, defaultGetValueFromEvent, getNamePath, getValue } from './utils/valueUtil';\nvar EMPTY_ERRORS = [];\n\nfunction requireUpdate(shouldUpdate, prev, next, prevValue, nextValue, info) {\n  if (typeof shouldUpdate === 'function') {\n    return shouldUpdate(prev, next, 'source' in info ? {\n      source: info.source\n    } : {});\n  }\n\n  return prevValue !== nextValue;\n} // We use Class instead of Hooks here since it will cost much code by using Hooks.\n\n\nvar Field = /*#__PURE__*/function (_React$Component) {\n  _inherits(Field, _React$Component);\n\n  var _super = _createSuper(Field);\n\n  /**\n   * Follow state should not management in State since it will async update by React.\n   * This makes first render of form can not get correct state value.\n   */\n\n  /**\n   * Mark when touched & validated. Currently only used for `dependencies`.\n   * Note that we do not think field with `initialValue` is dirty\n   * but this will be by `isFieldDirty` func.\n   */\n  // ============================== Subscriptions ==============================\n  function Field(props) {\n    var _this;\n\n    _classCallCheck(this, Field);\n\n    _this = _super.call(this, props); // Register on init\n\n    _this.state = {\n      resetCount: 0\n    };\n    _this.cancelRegisterFunc = null;\n    _this.mounted = false;\n    _this.touched = false;\n    _this.dirty = false;\n    _this.validatePromise = null;\n    _this.prevValidating = void 0;\n    _this.errors = EMPTY_ERRORS;\n    _this.warnings = EMPTY_ERRORS;\n\n    _this.cancelRegister = function () {\n      var _this$props = _this.props,\n          preserve = _this$props.preserve,\n          isListField = _this$props.isListField,\n          name = _this$props.name;\n\n      if (_this.cancelRegisterFunc) {\n        _this.cancelRegisterFunc(isListField, preserve, getNamePath(name));\n      }\n\n      _this.cancelRegisterFunc = null;\n    };\n\n    _this.getNamePath = function () {\n      var _this$props2 = _this.props,\n          name = _this$props2.name,\n          fieldContext = _this$props2.fieldContext;\n      var _fieldContext$prefixN = fieldContext.prefixName,\n          prefixName = _fieldContext$prefixN === void 0 ? [] : _fieldContext$prefixN;\n      return name !== undefined ? [].concat(_toConsumableArray(prefixName), _toConsumableArray(name)) : [];\n    };\n\n    _this.getRules = function () {\n      var _this$props3 = _this.props,\n          _this$props3$rules = _this$props3.rules,\n          rules = _this$props3$rules === void 0 ? [] : _this$props3$rules,\n          fieldContext = _this$props3.fieldContext;\n      return rules.map(function (rule) {\n        if (typeof rule === 'function') {\n          return rule(fieldContext);\n        }\n\n        return rule;\n      });\n    };\n\n    _this.refresh = function () {\n      if (!_this.mounted) return;\n      /**\n       * Clean up current node.\n       */\n\n      _this.setState(function (_ref) {\n        var resetCount = _ref.resetCount;\n        return {\n          resetCount: resetCount + 1\n        };\n      });\n    };\n\n    _this.triggerMetaEvent = function (destroy) {\n      var onMetaChange = _this.props.onMetaChange;\n      onMetaChange === null || onMetaChange === void 0 ? void 0 : onMetaChange(_objectSpread(_objectSpread({}, _this.getMeta()), {}, {\n        destroy: destroy\n      }));\n    };\n\n    _this.onStoreChange = function (prevStore, namePathList, info) {\n      var _this$props4 = _this.props,\n          shouldUpdate = _this$props4.shouldUpdate,\n          _this$props4$dependen = _this$props4.dependencies,\n          dependencies = _this$props4$dependen === void 0 ? [] : _this$props4$dependen,\n          onReset = _this$props4.onReset;\n      var store = info.store;\n\n      var namePath = _this.getNamePath();\n\n      var prevValue = _this.getValue(prevStore);\n\n      var curValue = _this.getValue(store);\n\n      var namePathMatch = namePathList && containsNamePath(namePathList, namePath); // `setFieldsValue` is a quick access to update related status\n\n      if (info.type === 'valueUpdate' && info.source === 'external' && prevValue !== curValue) {\n        _this.touched = true;\n        _this.dirty = true;\n        _this.validatePromise = null;\n        _this.errors = EMPTY_ERRORS;\n        _this.warnings = EMPTY_ERRORS;\n\n        _this.triggerMetaEvent();\n      }\n\n      switch (info.type) {\n        case 'reset':\n          if (!namePathList || namePathMatch) {\n            // Clean up state\n            _this.touched = false;\n            _this.dirty = false;\n            _this.validatePromise = null;\n            _this.errors = EMPTY_ERRORS;\n            _this.warnings = EMPTY_ERRORS;\n\n            _this.triggerMetaEvent();\n\n            onReset === null || onReset === void 0 ? void 0 : onReset();\n\n            _this.refresh();\n\n            return;\n          }\n\n          break;\n\n        /**\n         * In case field with `preserve = false` nest deps like:\n         * - A = 1 => show B\n         * - B = 1 => show C\n         * - Reset A, need clean B, C\n         */\n\n        case 'remove':\n          {\n            if (shouldUpdate) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        case 'setField':\n          {\n            if (namePathMatch) {\n              var data = info.data;\n\n              if ('touched' in data) {\n                _this.touched = data.touched;\n              }\n\n              if ('validating' in data && !('originRCField' in data)) {\n                _this.validatePromise = data.validating ? Promise.resolve([]) : null;\n              }\n\n              if ('errors' in data) {\n                _this.errors = data.errors || EMPTY_ERRORS;\n              }\n\n              if ('warnings' in data) {\n                _this.warnings = data.warnings || EMPTY_ERRORS;\n              }\n\n              _this.dirty = true;\n\n              _this.triggerMetaEvent();\n\n              _this.reRender();\n\n              return;\n            } // Handle update by `setField` with `shouldUpdate`\n\n\n            if (shouldUpdate && !namePath.length && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        case 'dependenciesUpdate':\n          {\n            /**\n             * Trigger when marked `dependencies` updated. Related fields will all update\n             */\n            var dependencyList = dependencies.map(getNamePath); // No need for `namePathMath` check and `shouldUpdate` check, since `valueUpdate` will be\n            // emitted earlier and they will work there\n            // If set it may cause unnecessary twice rerendering\n\n            if (dependencyList.some(function (dependency) {\n              return containsNamePath(info.relatedFields, dependency);\n            })) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        default:\n          // 1. If `namePath` exists in `namePathList`, means it's related value and should update\n          //      For example <List name=\"list\"><Field name={['list', 0]}></List>\n          //      If `namePathList` is [['list']] (List value update), Field should be updated\n          //      If `namePathList` is [['list', 0]] (Field value update), List shouldn't be updated\n          // 2.\n          //   2.1 If `dependencies` is set, `name` is not set and `shouldUpdate` is not set,\n          //       don't use `shouldUpdate`. `dependencies` is view as a shortcut if `shouldUpdate`\n          //       is not provided\n          //   2.2 If `shouldUpdate` provided, use customize logic to update the field\n          //       else to check if value changed\n          if (namePathMatch || (!dependencies.length || namePath.length || shouldUpdate) && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n            _this.reRender();\n\n            return;\n          }\n\n          break;\n      }\n\n      if (shouldUpdate === true) {\n        _this.reRender();\n      }\n    };\n\n    _this.validateRules = function (options) {\n      // We should fixed namePath & value to avoid developer change then by form function\n      var namePath = _this.getNamePath();\n\n      var currentValue = _this.getValue(); // Force change to async to avoid rule OOD under renderProps field\n\n\n      var rootPromise = Promise.resolve().then(function () {\n        if (!_this.mounted) {\n          return [];\n        }\n\n        var _this$props5 = _this.props,\n            _this$props5$validate = _this$props5.validateFirst,\n            validateFirst = _this$props5$validate === void 0 ? false : _this$props5$validate,\n            messageVariables = _this$props5.messageVariables;\n\n        var _ref2 = options || {},\n            triggerName = _ref2.triggerName;\n\n        var filteredRules = _this.getRules();\n\n        if (triggerName) {\n          filteredRules = filteredRules.filter(function (rule) {\n            var validateTrigger = rule.validateTrigger;\n\n            if (!validateTrigger) {\n              return true;\n            }\n\n            var triggerList = toArray(validateTrigger);\n            return triggerList.includes(triggerName);\n          });\n        }\n\n        var promise = validateRules(namePath, currentValue, filteredRules, options, validateFirst, messageVariables);\n        promise.catch(function (e) {\n          return e;\n        }).then(function () {\n          var ruleErrors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : EMPTY_ERRORS;\n\n          if (_this.validatePromise === rootPromise) {\n            _this.validatePromise = null; // Get errors & warnings\n\n            var nextErrors = [];\n            var nextWarnings = [];\n            ruleErrors.forEach(function (_ref3) {\n              var warningOnly = _ref3.rule.warningOnly,\n                  _ref3$errors = _ref3.errors,\n                  errors = _ref3$errors === void 0 ? EMPTY_ERRORS : _ref3$errors;\n\n              if (warningOnly) {\n                nextWarnings.push.apply(nextWarnings, _toConsumableArray(errors));\n              } else {\n                nextErrors.push.apply(nextErrors, _toConsumableArray(errors));\n              }\n            });\n            _this.errors = nextErrors;\n            _this.warnings = nextWarnings;\n\n            _this.triggerMetaEvent();\n\n            _this.reRender();\n          }\n        });\n        return promise;\n      });\n      _this.validatePromise = rootPromise;\n      _this.dirty = true;\n      _this.errors = EMPTY_ERRORS;\n      _this.warnings = EMPTY_ERRORS;\n\n      _this.triggerMetaEvent(); // Force trigger re-render since we need sync renderProps with new meta\n\n\n      _this.reRender();\n\n      return rootPromise;\n    };\n\n    _this.isFieldValidating = function () {\n      return !!_this.validatePromise;\n    };\n\n    _this.isFieldTouched = function () {\n      return _this.touched;\n    };\n\n    _this.isFieldDirty = function () {\n      // Touched or validate or has initialValue\n      if (_this.dirty || _this.props.initialValue !== undefined) {\n        return true;\n      } // Form set initialValue\n\n\n      var fieldContext = _this.props.fieldContext;\n\n      var _fieldContext$getInte = fieldContext.getInternalHooks(HOOK_MARK),\n          getInitialValue = _fieldContext$getInte.getInitialValue;\n\n      if (getInitialValue(_this.getNamePath()) !== undefined) {\n        return true;\n      }\n\n      return false;\n    };\n\n    _this.getErrors = function () {\n      return _this.errors;\n    };\n\n    _this.getWarnings = function () {\n      return _this.warnings;\n    };\n\n    _this.isListField = function () {\n      return _this.props.isListField;\n    };\n\n    _this.isList = function () {\n      return _this.props.isList;\n    };\n\n    _this.isPreserve = function () {\n      return _this.props.preserve;\n    };\n\n    _this.getMeta = function () {\n      // Make error & validating in cache to save perf\n      _this.prevValidating = _this.isFieldValidating();\n      var meta = {\n        touched: _this.isFieldTouched(),\n        validating: _this.prevValidating,\n        errors: _this.errors,\n        warnings: _this.warnings,\n        name: _this.getNamePath()\n      };\n      return meta;\n    };\n\n    _this.getOnlyChild = function (children) {\n      // Support render props\n      if (typeof children === 'function') {\n        var meta = _this.getMeta();\n\n        return _objectSpread(_objectSpread({}, _this.getOnlyChild(children(_this.getControlled(), meta, _this.props.fieldContext))), {}, {\n          isFunction: true\n        });\n      } // Filed element only\n\n\n      var childList = toChildrenArray(children);\n\n      if (childList.length !== 1 || ! /*#__PURE__*/React.isValidElement(childList[0])) {\n        return {\n          child: childList,\n          isFunction: false\n        };\n      }\n\n      return {\n        child: childList[0],\n        isFunction: false\n      };\n    };\n\n    _this.getValue = function (store) {\n      var getFieldsValue = _this.props.fieldContext.getFieldsValue;\n\n      var namePath = _this.getNamePath();\n\n      return getValue(store || getFieldsValue(true), namePath);\n    };\n\n    _this.getControlled = function () {\n      var childProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props6 = _this.props,\n          trigger = _this$props6.trigger,\n          validateTrigger = _this$props6.validateTrigger,\n          getValueFromEvent = _this$props6.getValueFromEvent,\n          normalize = _this$props6.normalize,\n          valuePropName = _this$props6.valuePropName,\n          getValueProps = _this$props6.getValueProps,\n          fieldContext = _this$props6.fieldContext;\n      var mergedValidateTrigger = validateTrigger !== undefined ? validateTrigger : fieldContext.validateTrigger;\n\n      var namePath = _this.getNamePath();\n\n      var getInternalHooks = fieldContext.getInternalHooks,\n          getFieldsValue = fieldContext.getFieldsValue;\n\n      var _getInternalHooks = getInternalHooks(HOOK_MARK),\n          dispatch = _getInternalHooks.dispatch;\n\n      var value = _this.getValue();\n\n      var mergedGetValueProps = getValueProps || function (val) {\n        return _defineProperty({}, valuePropName, val);\n      }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      var originTriggerFunc = childProps[trigger];\n\n      var control = _objectSpread(_objectSpread({}, childProps), mergedGetValueProps(value)); // Add trigger\n\n\n      control[trigger] = function () {\n        // Mark as touched\n        _this.touched = true;\n        _this.dirty = true;\n\n        _this.triggerMetaEvent();\n\n        var newValue;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (getValueFromEvent) {\n          newValue = getValueFromEvent.apply(void 0, args);\n        } else {\n          newValue = defaultGetValueFromEvent.apply(void 0, [valuePropName].concat(args));\n        }\n\n        if (normalize) {\n          newValue = normalize(newValue, value, getFieldsValue(true));\n        }\n\n        dispatch({\n          type: 'updateValue',\n          namePath: namePath,\n          value: newValue\n        });\n\n        if (originTriggerFunc) {\n          originTriggerFunc.apply(void 0, args);\n        }\n      }; // Add validateTrigger\n\n\n      var validateTriggerList = toArray(mergedValidateTrigger || []);\n      validateTriggerList.forEach(function (triggerName) {\n        // Wrap additional function of component, so that we can get latest value from store\n        var originTrigger = control[triggerName];\n\n        control[triggerName] = function () {\n          if (originTrigger) {\n            originTrigger.apply(void 0, arguments);\n          } // Always use latest rules\n\n\n          var rules = _this.props.rules;\n\n          if (rules && rules.length) {\n            // We dispatch validate to root,\n            // since it will update related data with other field with same name\n            dispatch({\n              type: 'validateField',\n              namePath: namePath,\n              triggerName: triggerName\n            });\n          }\n        };\n      });\n      return control;\n    };\n\n    if (props.fieldContext) {\n      var getInternalHooks = props.fieldContext.getInternalHooks;\n\n      var _getInternalHooks2 = getInternalHooks(HOOK_MARK),\n          initEntityValue = _getInternalHooks2.initEntityValue;\n\n      initEntityValue(_assertThisInitialized(_this));\n    }\n\n    return _this;\n  }\n\n  _createClass(Field, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props7 = this.props,\n          shouldUpdate = _this$props7.shouldUpdate,\n          fieldContext = _this$props7.fieldContext;\n      this.mounted = true; // Register on init\n\n      if (fieldContext) {\n        var getInternalHooks = fieldContext.getInternalHooks;\n\n        var _getInternalHooks3 = getInternalHooks(HOOK_MARK),\n            registerField = _getInternalHooks3.registerField;\n\n        this.cancelRegisterFunc = registerField(this);\n      } // One more render for component in case fields not ready\n\n\n      if (shouldUpdate === true) {\n        this.reRender();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRegister();\n      this.triggerMetaEvent(true);\n      this.mounted = false;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (!this.mounted) return;\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var resetCount = this.state.resetCount;\n      var children = this.props.children;\n\n      var _this$getOnlyChild = this.getOnlyChild(children),\n          child = _this$getOnlyChild.child,\n          isFunction = _this$getOnlyChild.isFunction; // Not need to `cloneElement` since user can handle this in render function self\n\n\n      var returnChildNode;\n\n      if (isFunction) {\n        returnChildNode = child;\n      } else if ( /*#__PURE__*/React.isValidElement(child)) {\n        returnChildNode = /*#__PURE__*/React.cloneElement(child, this.getControlled(child.props));\n      } else {\n        warning(!child, '`children` of Field is not validate ReactElement.');\n        returnChildNode = child;\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: resetCount\n      }, returnChildNode);\n    }\n  }]);\n\n  return Field;\n}(React.Component);\n\nField.contextType = FieldContext;\nField.defaultProps = {\n  trigger: 'onChange',\n  valuePropName: 'value'\n};\n\nfunction WrapperField(_ref5) {\n  var name = _ref5.name,\n      restProps = _objectWithoutProperties(_ref5, _excluded);\n\n  var fieldContext = React.useContext(FieldContext);\n  var namePath = name !== undefined ? getNamePath(name) : undefined;\n  var key = 'keep';\n\n  if (!restProps.isListField) {\n    key = \"_\".concat((namePath || []).join('_'));\n  } // Warning if it's a directly list field.\n  // We can still support multiple level field preserve.\n\n\n  if (process.env.NODE_ENV !== 'production' && restProps.preserve === false && restProps.isListField && namePath.length <= 1) {\n    warning(false, '`preserve` should not apply on Form.List fields.');\n  }\n\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    key: key,\n    name: namePath\n  }, restProps, {\n    fieldContext: fieldContext\n  }));\n}\n\nexport default WrapperField;"],"mappings":"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"},"metadata":{},"sourceType":"module"}